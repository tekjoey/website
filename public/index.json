[{"content":"This is the second in a series of articles detailing my 2024 homelab update.\nAs I said in my last post, my homelab has consisted of an application and storage server, with the application server being a 2013 iMac running Ubuntu Server 20.04 LTS. This has worked out fine, but I am running up against the 8GB RAM limit of the iMac, especially now that I have deployed Immich as photo storage. I also wanted to run more than just containers (Local DNS, Home Assistant, Kubernetes) so I wanted a hypervisor OS to be able to easily manage all of that. I\u0026rsquo;ve heard a lot about Proxmox, and since it is basically just Debian plus QEMU I figured it would be a nice easy choice. Plus, it\u0026rsquo;s free and open source!\nSimilar to my TrueNAS upgrade, I wanted to first get a feel for the Proxmox installation process and understand how to use it before I deployed it for real. Again, similar to my TrueNAS upgrade, I found a spare computer from work and loaded up Proxmox.\nThe installation process was simple and once I got it setup, I found the UI fairly intuitive, if a bit dated.\n","permalink":"http://localhost:1313/posts/docker-migration/","summary":"\u003cp\u003e\u003cem\u003eThis is the second in a series of articles detailing my 2024 homelab update.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eAs I said in my last post, my homelab has consisted of an application and storage server, with the application server being a 2013 iMac running Ubuntu Server 20.04 LTS. This has worked out fine, but I am running up against the 8GB RAM limit of the iMac, especially now that I have deployed Immich as photo storage. I also wanted to run more than just containers (Local DNS, Home Assistant, Kubernetes) so I wanted a hypervisor OS to be able to easily manage all of that. I\u0026rsquo;ve heard a lot about Proxmox, and since it is basically just Debian plus QEMU I figured it would be a nice easy choice. Plus, it\u0026rsquo;s free and open source!\u003c/p\u003e","title":"Docker Migration"},{"content":" This post was originally posted on a Wordpress blog that I had and forgot about. It is being posted here for completeness of my homelab journey. It was originally posted in the summer of 2024.\nThis is the first in a series of articles detailing my 2024 homelab update.\nI have been running my current homelab off an old 2013 or 2015 iMac I got from my grandfather, as well as a repurposed gaming PC I built in 2020. The iMac has been my application server (using Docker and Docker Compose to manage the applications), and the gaming PC has been my storage server, running TrueNAS CORE, which you may know is FreeBSD based. Nothing wrong with FreeBSD per se, but I am rather partial to Debian, so when I saw that TrueNAS SCALE was Debian-based, I knew I wanted to switch. Additionally, the 8GB of the iMac was starting to be a limiting factor, and I also wanted to do things “more correctly” like using a hypervisor, Kubernetes, and more Infrastructure-as-Code (IaC).\nI decided that the first thing to do was to upgrade my storage server, because once I got that taken care of, I could use it as a storage target. The main problem with my current computer was that it only had space for two HDDs, and I had three, so one was just propped up inside the case. It is a NAS-specific drive, but still, I wanted to give it a better life.\nInitial Testing and Officelabing The first step in any good upgrade path is choosing the new system and validating that it works for your given needs. My needs were simple:\nSupports Debian Have at least 3 spaces for hard drives. Since Debian is over twenty years old, my first point was pretty much taken care of. As for the second, my day job is as desktop support for two departments at a large university, so there is a pretty steady flow of used computers that we get rid of. After getting the approval of my manager, I choose a Dell Precision T1700. It had spaces for four drives, and had support for 32Gb of non-ECC RAM.\nI took a few old hard drives we had lying around at the office, loaded up TrueNAS SCALE, and played around with it in my spare time for a few months. I practiced exporting and importing pools, poked around the UI, and generally got used to the, in my opinion, better interface that SCALE offers over CORE.\nThen school let out and the summer slump of my university job hit. Add to that, my wife was going to be out of town for a week, and I had plenty of time to bring this new computer home and initialize my new storage server. Things had been going just fine in my test environment, so I was excited to finally get that third hard drive properly mounted and protected.\nDEGRADED Ever since I set up my homelab, I had been making backups (some to BackBlaze B2, some to AWS Glacier). Given that, I wasn’t too worried about my data being lost. Worst case scenario, everything breaks and my data is available in the cloud, but not locally accessible.\nSo I brought this new-to-me computer home, exported my current ZFS pool and shut down my gaming-turned-storage computer. I connected my three hard drives and an SSD for the boot drive to the Precision and booted into TrueNAS SCALE. It installed wonderfully, and I was met with the new dashboard I had come to like. I imported my pool, which seemed to go well until something caught my eye…\nPool Status: DEGRADED ⚠️\n“Degraded? How could that be?” I hadn’t had any errors (ever) with TrueNAS before, so I wasn’t sure the severity of the word “degraded”. I clicked on my pool information and saw that one of my three drives had not been recognized 1. Thankfully, TrueNAS uses ZFS and I had a RAIDZ1 VDEV, so no data was lost. But the health was obviously “degraded”.\nPerplexed by this, I exported the pool again and loaded my three drives back to my old server with CORE.\nPool Status: Healthy ✅\nMy old installation was able to read the drive, so it wasn’t a problem with the drive? I ran a short S.M.A.R.T. test on all the drives just to be sure, and it came back with no errors found. Weird.\nThus precipitated a two-day trek through forum posts. What was supposed to be a quick drive switch, turned into a troubleshooting nightmare where nothing would work. One of the first things I found was the 3.3v issue people were having with shucked drives. Mine weren’t shucked, but I gave it a shot. Nothing. I made sure the Precision’s BIOS was up-to-date, it was. The “faulty” drive was discoverable to both my old CORE installation, and to my MacBook (via a USB dock), but not to this Dell Precision. I checked the BIOS of the Dell and intermittently saw only two drives or all three drives show up (usually just the two). I was besides myself.\nAfter two days of troubleshooting, I gave up with that computer and brought home a second. This was a Dell OptiPlex 9020. I could only get 16GB of non-ECC RAM, but it had the same 4 HDD bays as the Precision.\nPool Status: DEGRADED ⚠️\nDegraded again. On a different system entirely with, presumably, a different enough BIOS. The OptiPlex BIOS also failed to register all three drives.\n“This is why people have imposter syndrome.” I thought to myself. “Because sometimes they really don’t know what is going on…”\nAt this point, I had accepted that I was going to have to use the same hardware, but I at least wanted the HDD bays of the Dell pre-built. I carefully dismantled first the pre-built, and then my old gaming/storage computer and transferred the motherboard. Alas, while my standard ATX motherboard fit, the front-panel connectors are some Dell-proprietary connector. I could probably make it work, but I was so discouraged at this point that I just rebuilt my old setup, this time with TrueNAS SCALE. My third HDD is now is a slightly better position, laid flat on the power supply.\nLessons Learned Another good exercise after any kind of deployment or upgrade is to look back and see what could have gone better and what information can we carry into the future.\nThe good While I didn’t exactly plan for downtime, the timing worked out that I would be able to take down my servers for an extended period of time, and would be able to devote sufficient time to fixing any problems. Additionally, I did leave my initial TrueNAS CORE installation intact, so that I could revert to it in the case of a failure (which I ended up having to do). Lastly, my troubleshooting skills came in handy when I had to nail down exactly what the problem was.\nThe bad I didn’t mention this earlier, but one thing I failed to do was to make a backup immediately before I started the swap. My backup schedule was once weekly, and I started this project on a Wednesday, so I could potentially have lost ~4 days of data. In my scenario (where I am the main user and not much data changes) this was acceptable, but part of the purpose of my homelab is learning industry best practice, and “backups before migration” is definitely a best practice.\nLooking forward I don’t know the next time that I will do a migration like this. It’s very probable that the hardware I have will stay the same for a while, with the possible exception of a new case to hold more drives (maybe an all SSD pool!). Regardless, though, next time I do anything major with my TrueNAS Server, I’ll be sure to take a backup of at least all my critical files, even if I can’t wait to play sysadmin again.\nThe drive in question was a TOSHIBA N300 4TB NAS drive, model HDWG440. The two drives that were recognized were TOSHIBA N300 4TB NAS drives, model HDWQ140. Details, details…\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","permalink":"http://localhost:1313/posts/truenas-migration/","summary":"\u003cblockquote\u003e\n\u003cp\u003e\u003cem\u003eThis post was originally posted on a Wordpress blog that I had and forgot about. It is being posted here for completeness of my homelab journey. It was originally posted in the summer of 2024.\u003c/em\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cem\u003eThis is the first in a series of articles detailing my 2024 homelab update.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eI have been running my current homelab off an old 2013 or 2015 iMac I got from my grandfather, as well as a repurposed gaming PC I built in 2020. The iMac has been my application server (using Docker and Docker Compose to manage the applications), and the gaming PC has been my storage server, running TrueNAS CORE, which you may know is FreeBSD based. Nothing wrong with FreeBSD per se, but I am rather partial to Debian, so when I saw that TrueNAS SCALE was Debian-based, I knew I wanted to switch. Additionally, the 8GB of the iMac was starting to be a limiting factor, and I also wanted to do things “more correctly” like using a hypervisor, Kubernetes, and more Infrastructure-as-Code (IaC).\u003c/p\u003e","title":"TrueNAS Migration"},{"content":" This post was originally posted on a Wordpress blog that I had and forgot about. It is being posted here for completeness of my homelab journey. It was originally posted in early 2023.\nI’ve decided to layout what my homelab looks like now because this summer I hope to change some things.\nStorage My current storage server is one that started life as a gaming computer that I built back in 2020. I had gotten a wild itch to build a computer (my first ever build), that admittedly I didn’t really plan much out. I also didn’t really factor in the fact that I am not a gamer. So after I built it I toyed around with Cities:Skylines, Stardew Valley, and other such games, but the computer largely sat unused (or at least under-used).\nThen I discovered homelabing, and suddenly I had a need for networked storage. I purchased three 4TB Toshiba drives and loaded up TrueNAS Core and had myself a fancy little Network Attached Storage server. The computer case I had was really only meant for one hard drive, so two of my hard drives are currently resting in some fairly precarious positions inside the case.\nApplications What is homelabing without applications? I am currently running Ubuntu Server on an old iMac my grandfather gave me. On that server, I am using Docker as the container engine to run the various applications. Along with that, I am using Docker Compose as my “Infrastructure as Code”. Most of my docker containers use Docker Volumes to store data, but for those that store a “significant” amount (which is a metric I do not have a definition for) I use bind-mounts that connect back to my aforementioned TrueNAS server via NFS.\nWhen I first started on this homelab journey, I went a little wild, deploying every application I came across, whether I actually had a need for it or not. After a while (and my wife’s need for a more present husband), I stopped deploying every container under the sun and settled into actually using those I had a use for, and getting rid of those I don’t. Currently, the ones I use are:\nNextcloud w/ Colabora Office: Google Drive replacement Immich: photo storage Authentik: authentication/SSO Firefly-III: personal finance management Homepage: links and mini dashboard Mealie: recipe management Paperless-NGX: virtual filing cabinet Traefik: load balancer/reverse proxy code-server: VS Code environment to access all my docker compose files Dozzel: live log viewer FreshRSS: RSS feeder. I use NetNewsWire on iPhone to actually read articles Homebox: physical inventory management Network I recently upgraded my network gear from the combo-box that Spectrum gave me to a TP-Link OMADA switch and access point with an OPNSense router. I do have three separate VLANS (Trusted, IoT and Guest), but I haven’t actually done any real configuration, so they’re not providing any security benefits.\nFurthermore, I am also using Cloudflare DNS as my only DNS service. This means, if I want a DNS record, I must expose the application to the internet. When I was still using Spectrum’s combo box, I tried setting up PiHole as a container, but for some reason I wasn’t able to get it to work. I haven’t exposed every service to the internet, so some services are still referred to by IP:Port and if I didn’t have Homepage, I would definitely forget which ones were which.\nSummer plans My goals for this summer (2024) are modest, but quite substantial, given the current state of things:\nProper network setup\nFirewall Rules to restrict IoT movement/connections and fallout Internal DNS server so that every service can have a name and I can stop referencing to IP:Port. Route everything with Tailscale (one of the coolest gosh-darn products to ever exist) Transfer to “new” servers. As previously stated, I’m currently running everything off an old iMac. This works, But I’m hitting the limit of what’s possible with its 8GB of RAM. I’ll transition to a more “production” environment by using Proxmox and running everything in Virtual Machines. This will give me the ability to more easily create snapshots/backups and spin up/down resources as needed.\nTransition to use more IaC. Infrastructure as Code is such a neat concept. The idea that my entire stack, from hardware to application, can be described and deployed via a configuration file, which can then be saved, stored, tracked via change control and all the rest, is such a wonderful idea and I want to be part of it. This will probably start off with just using a bit of Ansible and vanilla Kubernetes, but my eventual goal/dream is to learn NixOS and Terraform/OpenTofu and be able to recreate everything with as minimal intervention as possible. Additionally, this would make it easier to create an “emergency script” so that in the (hopefully very distant) future when I die and my family takes over my homelab and network, they would be able to revert it to a “simple” state, or even clean everything up to dispose of/sell.\nWell, that’s about all I have. I’ll have more posts as I preform all the changes I just mentioned. Hopefully I’m able to accomplish all of them.\n#SoliDeoGloria\n","permalink":"http://localhost:1313/posts/2023-homelab/","summary":"\u003cblockquote\u003e\n\u003cp\u003e\u003cem\u003eThis post was originally posted on a Wordpress blog that I had and forgot about. It is being posted here for completeness of my homelab journey. It was originally posted in early 2023.\u003c/em\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003chr\u003e\n\u003cp\u003eI’ve decided to layout what my homelab looks like now because this summer I hope to change some things.\u003c/p\u003e\n\u003ch2 id=\"storage\"\u003eStorage\u003c/h2\u003e\n\u003cp\u003eMy current storage server is one that started life as a gaming computer that I built back in 2020. I had gotten a wild itch to build a computer (my first ever build), that admittedly I didn’t really plan much out. I also didn’t really factor in the fact that I am not a gamer. So after I built it I toyed around with Cities:Skylines, Stardew Valley, and other such games, but the computer largely sat unused (or at least under-used).\u003c/p\u003e","title":"2023 Homelab"},{"content":"Welcome to my site! Here I will be talking about the things that interest me.\nThe purposes of this site are three-fold:\nInformation archive for myself. I like to homelab and selfhost, and sometimes I forget the things that I have done, or how I did them. Ths site will be a reposatory of all my adventures Information archive for others. The internet is a tremendous invention, allowing the dispursal of information accross the globe nearly instantaniously. I hope that at least some of these posts will be helpful to someone in some way. Evidence for future employers: A resume can only say so much. I hope that this website serves as proof of what I can do to anyone who hapens to be looking. As of the writing, this site is still very new and I am still learning all the options for Hugo and PaperMod (the framework and theme, respectively, that this blog runs off of).\n","permalink":"http://localhost:1313/posts/welcome/","summary":"\u003cp\u003eWelcome to my site! Here I will be talking about the things that interest me.\u003c/p\u003e\n\u003cp\u003eThe purposes of this site are three-fold:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eInformation archive for myself.\u003c/strong\u003e I like to homelab and selfhost, and sometimes I forget the things that I have done, or how I did them. Ths site will be a reposatory of all my adventures\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eInformation archive for others.\u003c/strong\u003e The internet is a tremendous invention, allowing the dispursal of information accross the globe nearly instantaniously. I hope that at least some of these posts will be helpful to someone in some way.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEvidence for future employers\u003c/strong\u003e: A resume can only say so much. I hope that this website serves as proof of what I can do to anyone who hapens to be looking.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eAs of the writing, this site is still very new and I am still learning all the options for \u003ca href=\"https://gohugo.io/\"\u003eHugo\u003c/a\u003e and \u003ca href=\"https://github.com/adityatelange/hugo-PaperMod\"\u003ePaperMod\u003c/a\u003e (the framework and theme, respectively, that this blog runs off of).\u003c/p\u003e","title":"Welcome!"},{"content":"Biography coming soon. For now, here is my resume.\nTo contact me, email: josiah.mckay [at] protonmail.com\n","permalink":"http://localhost:1313/about/","summary":"\u003cp\u003eBiography coming soon. For now, here is my \u003ca href=\"http://localhost:1313/resume/\"\u003eresume\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eTo contact me, email: josiah.mckay [at] protonmail.com\u003c/p\u003e","title":""},{"content":"Education \u0026amp; Certification Millersville University\nBachelor of Arts in Entertainment Technology [2021]\nMinor: Music; General Applied Engineering and Technology\nCommunity College of the Air Force\nAssociates in Applied Engineering [2020]\nCertificates CompTIA A+ CompTIA Network+ CompTIA Security+ Professional Experience Technology Support Technician University of South Carolina; College of Arts and Sciences [February 2023 – Present]\nTook over primary desktop support for Mathematics and Statistics departments Created inventory and provided continuation of support for over 150 desktop and laptop computers Facilitated Windows 11 migration for over 60 unsupported computers Created and maintained documentation for unique departmental needs Lead the transition of support from email to ServiceNow, decreasing support wait time. Administered existing VMs and physical servers Assisted in transitioning three legacy servers to the University’s VMware environment. Updated existing VM to current security standards. Maintained Active Directory computer and user group records for Mathematics and Statistics departments and modified them as appropriate. Resolved over 150 Desktop Support incidents Tier 1 Network Issues User Support Technician University of South Carolina; College of Arts and Sciences [July 2021 – February 2023]\nConfigured over eighty new Windows and macOS based desktops and laptops, including setting group policy and joining to a domain. Utilize remote control applications (Bomgar, Windows RDP) to assist off-site personal. Troubleshot and solved over two-hundred incidents both in-person and remotely ranging from resetting credentials to analyzing failed hard drives. Recommended and installed cost-effective and productive hardware and software for end-users. Continually learned about new technologies and improved current skills through various online trainings. Radar, Airfield, and Weather Systems Air National Guard [January 2016 – Present]\nInstalled, maintained, tested, removed, and replaced mission-critical aircraft radio communication systems. Led engaging training sessions for multiple Airmen that increased job knowledge and job performance. Promoted to the rank of Staff Sergeant after completion of Airmen Leadership School and demonstration of competency and integrity. Obtained Secret Clearance. Professional Development Homelab [2021 - Present]\nSetup and manage TCP/IP networks, including VLANs, DHCP, firewall rules, BIND9 DNS, and Traefik reverse proxy. Install, update, manage, and backup Proxmox nodes running multiple Linux VMs. Configured and managed Docker containers via YAML files. Setup and manage SMB, NFS, and iSCSI network file shares. Research and implement Windows Server 2012 and 2019 with roles for Domain Controller, DNS, DHCP, storage solutions and file sharing, and Group Policy. Use Python, Ansible, and Bash scripting to automate tasks. Expand development knowledge with Golang and Git version control. Research and implement best practice for networking, secure hypervisor and VM deployments, and application configurations via Docker and Kubernetes. Utilized AWS Glacier Deep Archive and Backblaze B2 for backups and DR recovery. Utilized various platforms such as LinkedIn Learning, ITProTV, and YouTube to learn about new technologies and strengthen my current skill set. ","permalink":"http://localhost:1313/resume/","summary":"\u003ch2 id=\"education--certification\"\u003eEducation \u0026amp; Certification\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eMillersville University\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eBachelor of Arts in Entertainment Technology [2021]\u003c/p\u003e\n\u003cp\u003eMinor: Music; General Applied Engineering and Technology\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eCommunity College of the Air Force\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eAssociates in Applied Engineering [2020]\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"certificates\"\u003eCertificates\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eCompTIA A+\u003c/li\u003e\n\u003cli\u003eCompTIA Network+\u003c/li\u003e\n\u003cli\u003eCompTIA Security+\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"professional-experience\"\u003eProfessional Experience\u003c/h2\u003e\n\u003ch3 id=\"technology-support-technician\"\u003eTechnology Support Technician\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eUniversity of South Carolina; College of Arts and Sciences\u003c/strong\u003e [February  2023 – Present]\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTook over primary desktop support for Mathematics and Statistics departments\n\u003cul\u003e\n\u003cli\u003eCreated inventory and provided continuation of support for over 150 desktop and laptop computers\u003c/li\u003e\n\u003cli\u003eFacilitated Windows 11 migration for over 60 unsupported computers\u003c/li\u003e\n\u003cli\u003eCreated and maintained documentation for unique departmental needs\u003c/li\u003e\n\u003cli\u003eLead the transition of support from email to ServiceNow, decreasing support wait time.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eAdministered existing VMs and physical servers\n\u003cul\u003e\n\u003cli\u003eAssisted in transitioning three legacy servers to the University’s VMware environment.\u003c/li\u003e\n\u003cli\u003eUpdated existing VM to current security standards.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eMaintained Active Directory computer and user group records for Mathematics and Statistics departments and modified them as appropriate.\u003c/li\u003e\n\u003cli\u003eResolved over 150 Desktop Support incidents\n\u003cul\u003e\n\u003cli\u003eTier 1 Network Issues\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"user-support-technician\"\u003eUser Support Technician\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eUniversity of South Carolina; College of Arts and Sciences\u003c/strong\u003e [July 2021 – February 2023]\u003c/p\u003e","title":"Resume"}]